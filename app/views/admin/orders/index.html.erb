<div class="container mt-5">
  <h1><%= t("all_orders") %></h1>
  
  <table id="ordersTable" class="table table-striped table-bordered">
    <thead>
      <tr>
        <th scope="col"><%= t("order_id") %></th>
        <th scope="col"><%= t("status") %></th>
        <th scope="col"><%= t("actions") %></th>
      </tr>
    </thead>
    <tbody>
      <% @orders.each do |order| %>
        <tr>
          <td><%= order.id %></td>
          <td>
            <span class="badge bg-<%= order.status == 'pending' ? 'warning' : order.status == 'in_progress' ? 'info' : 'success' %>">
              <%= order.status %>
            </span>
          </td>
          <td>
            <%= link_to t("view_details"), admin_order_path(order), class: "btn btn-dark me-2 mb-1" %>
            <%= button_to t("remove"), admin_order_path(order), method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-danger" %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

<%= javascript_include_tag 'https://code.jquery.com/jquery-3.6.0.min.js' %>
<%= javascript_include_tag 'https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js' %>

<script>
  $(document).ready(function() {
    $('#ordersTable').DataTable({
      "order": [[0, "desc"]], // Order by ID descending
      "language": {
        "search": "Search by Order ID:"
      },
      "columnDefs": [
        {
          "targets": [1, 2], // Make these columns unsortable
          "orderable": false
        }
      ]
    });
  });
</script>
