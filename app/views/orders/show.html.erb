<!-- app/views/orders/show.html.erb -->
<div class="container mt-5">
  <div class="card shadow">
    <div class="card-header bg-primary text-white">
      <h1 class="mb-0">Order Details</h1>
    </div>
    <div class="card-body">
      <div class="row">
        <div class="col-md-6">
          <p><strong>Full Name:</strong> <%= @order.full_name %></p>
          <p><strong>Phone Number:</strong> <%= @order.phone_number %></p>
          <p><strong>Address:</strong> 
          <% if @order.address.start_with?('http') %>
            <%= link_to 'View on Google Maps', @order.address, target: '_blank' %>
          <% else %>
            <%= @order.address %>
          <% end %>
        </p>
        
        </div>
        <div class="col-md-6">
          <p><strong>Guests Number:</strong> <%= @order.guests_number %></p>
          <p><strong>Date:</strong> <%= @order.date %></p>
          <p><strong>Description:</strong> <%= @order.description %></p>
          <p>
            <strong>Status:</strong> 
            <span class="badge bg-<%= @order.status == 'pending' ? 'warning' : 'success' %>">
              <%= @order.status.capitalize %>
            </span>
          </p>
        </div>
      </div>

      <% if @prebuilt_menu.present? %>
        <div class="mt-4">
          <h2><%= @prebuilt_menu.name %></h2>
          <div class="row">
            <div class="col-md-6">
              <% if @prebuilt_menu.image.attached? %>
                <%= image_tag @prebuilt_menu.image %>
              <% else %>
                <p>No image available</p>
              <% end %>
            </div>
            <div class="col-md-6">
              <p><strong>Cost per Person:</strong> <%= number_to_currency(@prebuilt_menu.cost) %></p>
              <p><strong>Total Cost:</strong> <%= number_to_currency(@order.total_cost) %></p>
            </div>
          </div>

          <h3>Foods Included:</h3>
          <ul>
            <% @prebuilt_menu.foods.each do |food| %>
              <li><%= food.name %></li>
            <% end %>
          </ul>
        </div>
      <% else %>
        <div class="mt-4">
          <h3>Foods</h3>
          <ul class="list-group mb-4">
            <% @order.foods.each do |food| %>
              <li class="list-group-item d-flex justify-content-between align-items-center">
                <%= food.name %>
                <span class="badge bg-primary rounded-pill"><%= number_to_currency(food.price) %></span>
              </li>
            <% end %>
          </ul>
        </div>
        <p class="h4"><strong>Total Cost:</strong> <%= number_to_currency(@order.total_cost) %></p>
      <% end %>
    </div>
    <div class="card-footer text-right">
      <%= link_to 'Back to Orders', orders_path, class: 'btn btn-primary' %>
    </div>
  </div>
</div>
